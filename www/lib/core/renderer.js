// Generated by CoffeeScript 1.6.1
(function() {
  var Hogan, defaults;

  Hogan = require('hogan.js');

  defaults = {
    prefix: ''
  };

  module.exports = {
    initialise: function(conf) {
      this.conf = conf != null ? conf : defaults;
      this.templates = {};
      this.load();
      return this;
    },
    load: function() {
      var id, template, _ref, _results;
      _ref = window.templates;
      _results = [];
      for (id in _ref) {
        template = _ref[id];
        _results.push(this.set(id, new Hogan.Template(template)));
      }
      return _results;
    },
    compile: function(tpl) {
      var template;
      if (template instanceof Hogan.Template) {
        return template = tpl;
      } else {
        return Hogan.compile(tpl);
      }
    },
    set: function(id, template) {
      return this.templates[this.conf.prefix + id] = typeof template === 'string' ? this.compile(template) : template;
    },
    get: function(nsString) {
      if (nsString == null) {
        nsString = null;
      }
      if (nsString != null) {
        return this.templates[this.conf.prefix + nsString];
      } else {
        return this.templates;
      }
    },
    render: function(id, data) {
      if (this.get(id) != null) {
        return this.get(id).render(data, this.templates);
      } else {
        throw "Template '" + id + "' not found";
      }
    }
  };

}).call(this);
