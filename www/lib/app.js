// Generated by CoffeeScript 1.6.1
(function() {
  var Game, app, bind, clickables, db, device, init, loadViews, onDeviceReady, viewRoutes;

  Game = require('./controllers/Game').Game;

  device = require('./core/device');

  clickables = require('./ui/clickables');

  db = require('./controllers/db');

  viewRoutes = {
    main: require('./views/main')
  };

  module.exports = app = window.app = {
    renderer: require('./core/renderer').initialise(),
    views: require('./core/views')
  };

  init = function() {
    loadViews();
    if (device.get('type') != null) {
      return bind();
    } else {
      return onDeviceReady();
    }
  };

  loadViews = function() {
    var id, ns, view, views, _results;
    _results = [];
    for (ns in viewRoutes) {
      views = viewRoutes[ns];
      _results.push((function() {
        var _results1;
        _results1 = [];
        for (id in views) {
          view = views[id];
          _results1.push(app.views.load("" + ns + "." + id, view));
        }
        return _results1;
      })());
    }
    return _results;
  };

  bind = function() {
    return document.addEventListener('deviceready', onDeviceReady, false);
  };

  onDeviceReady = function() {
    var view;
    clickables.initialise();
    db.initialise();
    return view = app.views.open('main.index');
  };

  init();

}).call(this);
